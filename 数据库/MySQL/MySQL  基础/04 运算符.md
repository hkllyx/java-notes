- [数值运算符](#数值运算符)
- [位运算符](#位运算符)
- [比较运算符](#比较运算符)
  - [LIKE](#like)
  - [REGEXP](#regexp)
- [逻辑运算符](#逻辑运算符)
- [赋值运算符](#赋值运算符)
- [流程控制运算符](#流程控制运算符)
- [优先级](#优先级)

# 数值运算符

| 运算符     | 说明     |
| ---------- | -------- |
| `+`        | 加       |
| `-`        | 负       |
| `/`        | 除以     |
| `*`        | 乘以     |
| `-`        | 负       |
| `%`, `MOD` | 取模     |
| `DIV`      | 整形除以 |

# 位运算符

| 运算符 | 说明     |
| ------ | -------- |
| `&`    | 与       |
| `|`    | 或       |
| `^`    | 异或     |
| `<<`   | 向左位移 |
| `>>`   | 向右位移 |
| `~`    | 非       |

# 比较运算符

| 运算符                | 说明                                         |
| --------------------- | -------------------------------------------- |
| `=`                   | 等于（在 `SET` 之外使用）                    |
| `!=, <>`              | 不等于                                       |
| `>`                   | 大于                                         |
| `>=`                  | 大于等于                                     |
| `<`                   | 小于                                         |
| `<=`                  | 小于等于                                     |
| `<=>`                 | NULL-safe等于（将所有 `NULL` 认为是一个值） |
| `BETWEEN ... AND ...` | 检测一个值是否在一个范围内                   |
| `IN(...)`             | 检查值是否在集合中                           |
| `IS NOT NULL`         | 检查是否不为 `NULL`                          |
| `IS NULL`             | 检查是否为 `NULL`                            |
| `IS`                  | 检查布尔值是否为true                        |
| `IS NOT`              | 检查布尔值是否不为true                      |
| `LIKE`                | 字符串简单模版匹配                           |
| `REGEXP`              | 字符串正则表达式匹配                         |
| `RLIKE`               | 字符串正则表达式匹配                         |
| `SOUNDS LIKE`         | 比较发音                                     |

## LIKE

- 匹配整个字符串
    ```
    mysql> SELECT 'abc' LIKE 'a%c', 'abcd' LIKE 'a%c';
    +------------------+-------------------+
    | 'abc' LIKE 'a%c' | 'abcd' LIKE 'a%c' |
    +------------------+-------------------+
    |                1 |                 0 |
    +------------------+-------------------+
    ```
- 通配符（wildcard）
    - `%`：匹配任意字符任意多次，可以为匹配0次
    - `_`：必须匹配任意字符一次
- 通配符匹配代价比较高，必须谨慎使用：
    - 不要过度使用通配符。如果其他操作符能达到相同的目的，应该使用其他操作符
    - 在确实需要使用通配符时，除非绝对有必要，否则不要把它们用在搜索模式的开始处。把通配符置于搜索模式的开始处，搜索起来是最慢的
    - 仔细注意通配符的位置。如果放错地方，可能不会返回想要的数据

## REGEXP

- 在字符串中查找匹配部分，可以为整个字符串，也可以为部分字符串
    ```
    mysql> SELECT 'abc' REGEXP 'a.*c', 'abcd' REGEXP 'a.*c';
    +---------------------+----------------------+
    | 'abc' REGEXP 'a.*c' | 'abcd' REGEXP 'a.*c' |
    +---------------------+----------------------+
    |                   1 |                    1 |
    +---------------------+----------------------+
    ```
- 匹配规则
    - OR匹配：匹配多个字符串中的一个，如 `a|b|c` 或 `[abc]`
    - 匹配范围，比如 `[a-c]`
    - 通配符：`.` 匹配任意字符一次
    - 匹配字符类

        | 类           | 说明                                                 |
        | ------------ | ---------------------------------------------------- |
        | `[:alnum:]`  | 任意字母和数字（同 `[a-zA-Z0-9]`）                   |
        | `[:alpha:]`  | 任意字符（同 `[a-zA-Z]`）                            |
        | `[:blank:]`  | 空格和制表（同 `[\\t]`）                             |
        | `[:cntrl:]`  | ASCII控制字符（ASCII 0到31和127）               |
        | `[:digit:]`  | 任意数字（同 `[0-9]`）                               |
        | `[:graph:]`  | 与 `[:print:]` 相同，但不包括空格                    |
        | `[:lower:]`  | 任意小写字母（同 `[a-z]`）                           |
        | `[:print:]`  | 任意可打印字符                                       |
        | `[:punct:]`  | 既不在 `[:alnum:]` 又不在 `[:cntrl:]` 中的任意字符   |
        | `[:space:]`  | 包括空格在内的任意空白字符（同 `[\\f\\n\\r\\t\\v]`） |
        | `[:upper:]`  | 任意大写字母（同 `[A-Z]`）                           |
        | `[:xdigit:]` | 任意十六进制数字（同 `[a-fA-F0-9]`）                 |
    - 匹配多个实例

        | 元 字 符 | 说 明                           |
        | -------- | ------------------------------- |
        | `*`      | 0个或多个匹配                  |
        | `+`      | 1个或多个匹配（等于 `{1,}`）   |
        | `?`      | 0个或1个匹配（等于 `{0,1}`） |
        | `{n}`    | 指定数目的匹配                  |
        | `{n,}`   | 不少于指定数目的匹配            |
        | `{n,m}`  | 匹配数目的范围（m不超过255）  |
    - 定位符（anchor）

        | 元 字 符  | 说 明      |
        | --------- | ---------- |
        | `^`       | 文本的开始 |
        | `$`       | 文本的结尾 |
        | `[[:<:]]` | 词的开始   |
        | `[[:>:]]` | 词的结尾   |
- 将 `LIKE` 的通配符转为 `REGEXP`
    - `%`：`^.*$`
    - `_`：`^.$`

# 逻辑运算符

| 运算符    | 说明     |
| --------- | -------- |
| `AND, &&` | 逻辑与   |
| `OR, ||`  | 逻辑或   |
| `NOT, !`  | 取反     |
| `XOR`     | 逻辑异或 |

# 赋值运算符

| 运算符 | 说明                          |
| ------ | ----------------------------- |
| `=`    | 赋值，不能在 `SET` 语句内使用 |
| `:=`   | 赋值，可以在 `SET` 语句内使用 |

# 流程控制运算符

| 运算符 | 说明                  |
| ------ | --------------------- |
| `CASE` | 案件运算符（多重if） |
```
CASE value
    WHEN [compare-value] THEN result
    [WHEN [compare-value] THEN result ...]
    [ELSE result]
END CASE
```

# 优先级

| 优先级依次降低                                                                    |
| --------------------------------------------------------------------------------- |
| `INTERVAL`                                                                        |
| `BINARY`, `COLLATE`                                                               |
| `!`                                                                               |
| `-` (负), `~` (位非)                                                              |
| `^`                                                                               |
| `*`, `/`, `DIV`, `%`, `MOD`                                                       |
| `-`(减), `+`                                                                      |
| `<<`, `>>`                                                                        |
| `&`                                                                               |
| `|`                                                                               |
| `=` (等于), `<=>`, `>=`, `>`, `<=`, `<`, `<>`, `!=`, `IS`, `LIKE`, `REGEXP`, `IN` |
| `BETWEEN`, `CASE`, `WHEN`, `THEN`, `ELSE`                                         |
| `NOT`                                                                             |
| `AND`, `&&`                                                                       |
| `XOR`                                                                             |
| `OR`, `||`                                                                        |
| `=` (赋值), `:=`                                                                  |
|`BINARY`, `COLLATE`                                                                |

- 如果开启PIPES_AS_CONCAT，则 `||` 可以做连接运算符，优先级同 `^`
- 如果开启HIGH_NOT_PRECEDENCE，则 `NOT` 的优先级同 `!` 操作符相同
